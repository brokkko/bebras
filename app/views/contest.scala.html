@(status:String, pagedUserProblems:List[List[models.problems.Problem]], problem2index:Map[models.problems.Problem, Integer], jsonContestInfo:String, problemsCss:List[views.ResourceLink], problemsJs:List[views.ResourceLink])
@import models.Contest
@import models.Event
@import models.User
@import scala.List
@import models.Utils;
@import views.ResourceLink
@main_with_menu(Event.current.getTitle)(List(new ResourceLink("contest.css")) ++ problemsCss, List(new ResourceLink("contest.js")) ++ problemsJs) {
    <div id='contest-time'>
        @if(Contest.current.isUnlimitedTime) {
            <div id='time-status-info'>Время не ограничено</div>
            <div id='stop-contest'><span class='page-button active'>Завершить</span></div>
        } else {
            <div id='time-status-info'>Осталось</div>
            <div id='time-info'>10 минут</div>
            <div id='stop-contest'><span class='page-button active'>Завершить досрочно</span></div>
        }
        <div id='stop-confirmation' class='hidden'><span class='page-button active'>Подтвердите</span></div>
    </div>
} {
    <div id='all-problems-in-pages'>

        <div class='contest-info hidden'>@Html(jsonContestInfo)</div>
        @if(status == "results") {
            <div id='contest-results'>@contest_results(Contest.current.evaluateUserResults(User.current))</div>
        }
        @format_pages_top(pagedUserProblems.length, "dont-move-down")
        @format_pages_bottom()
        @for((page, pageIndex) <- pagedUserProblems.zipWithIndex) {
            <div class='page@if(pageIndex > 0){ hidden}'>
            @for(problem <- page) {
                <div class='problem'><span class='hidden pid'>@problem2index(problem)</span>
                    @problem.format(problem2index(problem), status == "results")
                </div>
            }
            </div>
        }
        @format_pages_bottom()
        @format_pages_top(pagedUserProblems.length, "")

    </div>

    <div id='contest-finished-info' class="hidden">
        <h1>Соревнование завершено</h1>
        <p class='warning'>
        @if(Contest.current.resultsAvailableImmediately()) {
                Результаты и правильные ответы доступны: <a href="@routes.Contests.contest(Event.currentId, Contest.current.getId)">просмотреть результаты</a>.
        } else {
            @if(Contest.current.resultsNotAvailableAtAll) {
                Результаты и правильные ответы будут доступны позже.
            } else {
                Результаты и правильные ответы будут доступны: <b>@Utils.formatContestDate(Contest.current.getResults).</b>
            }
        }
        </p>
        <p id='answer-sending-info-do' class='hidden answer-sending-info'>Отсылка ответов...</p>
        <p id='answer-sending-info-ok' class='hidden answer-sending-info'>Все ваши ответы отосланы на проверку</p>
        <p id='answer-sending-info-fail' class='hidden answer-sending-info warning'>ВНИМАНИЕ! В данный момент связь с Интернетом отсутствует, поэтому некоторые ваши ответы сохранены на этом компьютере,
            но не отосланы на проверку. Зайдите на эту страницу позже, когда появится связь, и ответы будут отосланы.</p>
    </div>
}