@(form: DynamicForm, action:Call, submit_text:String, fields:List[models.forms.InputField], need_undo:Boolean)
@import models.forms.inputtemplate.InputTemplate
@import play.data.DynamicForm
@import play.mvc.Call
@import play.mvc.Http
<form class="basic-form" action="@action" method="POST">
    @if(form.globalErrors().size > 0) {
        <span class="error-global">@form.globalErrors().map { e => @e.message}.mkString(", ")</span>
    }
    <fieldset>
    @*
    @if(form("id").value != null) {
    <input type="hidden" value="@form("_id").value" name="id">
    }
    *@
    @for(field <- fields) {
        <div class="controls @if(form(field.getName).hasErrors) {error}">
            <label>@Html(field.getInputConfiguration.getTitle) @if(field.getInputConfiguration.isRequired) {<small>*</small>}</label>
            @if(form(field.getName).errors().size() > 0) {
                <div class="error-inline">@form(field.getName).errors().map { e => @e.message}.mkString(", ")</div>
            }
            <div class='form-field-input'>
                @field.format(form)
            </div>
            <div class="error-inline-empty"></div>
            @*@if(field.getHint != null) {<span class="help-inline">field.getHint</span>}*@
        </div>
    }
    </fieldset>
    <div class="form-actions">
        <input type="submit" value="@submit_text" class="form-button">
        @if(need_undo) {
            <input type="button" class="form-button form-undo" value="@Messages("button.undo")">
        }
    </div>
</form>
