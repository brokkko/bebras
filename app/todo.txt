TODO показывать в списке организаторов, через кого они зарегистрированы
TODO при просмотре данных пользователя писать его роль
TODO при регистрации писать, через кого регистрация
TODO реферальная регистрация для ролей, которые не регистрируются анонимно
TODO когда администратор регистрирует, у зарегистрированных написано "Зарегистрировано через:" и всё, без организации

TODO позволять делать ссылки на таблицы - по идентификатору или чтобы не изменялся номер

TODO блоки задач теряют конфигурациооные данные, если изменить translators соревнования
TODO шаблоны настроек, чтобы менять конфигурации сразу про все соревнования

TODO в user info добавить ссылку на whois
TODO в user info возможность просмотра всех посещений, не только последнего
TODO после регистрации пользователем другого пользователя предлагать вернуться на сайт
TODO позволить региональным представителям просматривать свою квитанцию
TODO отсылать email асинхронно

TODO при загрузке bbtc задач удалять стаые или просто сделать возможность удалить все задачи соревнования (каталога)
TODO вычислять максимальное количество баллов, которое можно было получить по задаче
TODO remove user
TODO button to invalidate all users results
TODO redirect() instead of ok() for each POST
TODO (?) тип результата
TODO (?) счетчики, еще и разные для разных событий
TODO реклама
TODO эффект перелистывания, и вообще, сделать дизайн задач как в старом
TODO скачает при переключении блоков задач

1. В полях регистрации ФИО должны допускаться только русские буквы и знак "-".
2. В поле регистрации phone должны допускаться только цифры и знак "+".
3. Подключение таблицы школ. Нужна возможность проводить тестирование без привязки к этой таблице.
То есть, например, рядом с местом, где можно закачать файл с кодами, может быть клетка с возможностью установки галочки,
при установке которой подгрузка школ не требуется и сверка данных по этому полю при регистрации производиться не будет.
Настроить 1, 2, 3 можно уже сейчас. Во вкладке "администрирование" есть раздел "роли пользователей", в котором описаны настройки всех полей, которые требуются при регистрации. Но изменять это поле сложно, нужно знать язык, на котором это описывается. В планах есть сделать простой интерфейс для этих настроек, но это не быстро, и я пока не знаю, когда этим займусь.
Итого, 1 и 2 я поправлю в настройках сам, для 3 просто покажу, в каком месте что менять, чтобы добавить или убрать поле ввода номера школы.
                Исправьте, пожалуйста, 3 тоже, чтобы сейчас это было так. А потом, если будет возможность управлять этим самостоятельно, то будем делать сами.

4. E-mail адрес с которого происходит отправка пароля должен быть helpbbtc@mail.ru.
Изменю в ближайшее время, этот адрес можно будет указывать в настройках события на вкладке "администрирование"

5. Желательно, чтобы файл с данными зарегистрированных пользователей назывался BBTC_Registration.
Во всех событиях независимо от названия события?
                Вы правы, лучше, он назывался «имя события» + «_Registration».

6. Файлы с результатами соревнований. В колонках есть идентификаторы _A, _B, _C. При создании нового соревнования там устанавливается _A. Сейчас есть, например, "num_right_B", а должно быть "num_right".
По-моему, я это уже исправил, и убрал. Проверю, если нет, то будет в ближайшее время

7. Желательно, чтобы файлы с результатами назывались: "BBTC" + " " + "название соревнования" + " " + answers. Например, "bbtc test A answers".
Или любая другая система, в которой будет постоянное название, плюс название соревнования данное при создании соревнования.
BBTC всегда BBTC независимо от названия события?

            На данный момент, событие, которое требует обработки (в access), будет происходить только на bbtc. Все остальное – либо тестирование,
            либо архив. Хотя в перспективе, может появится еще постоянный проект, который будет называться, например, runo.
            Проблема такая же, как в п. 5. Может быть, тогда сделать также – «имя события» + все остальное?

8. Важно, чтобы для всех подгружаемых данных (банки вопросов, справочники школ, зарегистрированные пользователи, файлы с указанием мест и т.д.)
была возможность скачивания, даже если файл с данными пустой. Это нужно чтобы, во-первых, можно было посмотреть, что там есть на данный
момент, а, во-вторых, чтобы использовать файл в качестве шаблона.
Т.е. чтобы загруженные файлы можно было скачать обратно. Это можно сделать
            А если файл по какой-то причине не загружен, чтобы там всегда был шаблон, который тоже можно скачать.

9. В данных зарегистрированных пользователей в поле birthday данные можно ставить без данных дня недели и времени.
Я вывожу данные не сам, их за меня пишет система в соответствии с каким-то стандартом, если день недели и время мешают, я могу попытаться найти, как настроить формат вывода дат
                Если это сложно, то можно не менять. Я думал, что там, как в excel настройка даты, то есть нужно просто выбрать формат отображения.

10. В клонированном событии bbtc20130513-20 не отображаются выбранные ответы в результатах соревнований (на исходном событии (bbtc) это работает).
Проверю

11. Работа с заданиями - отдельные вопросы. Необходимо описание возможностей по работе с заданиями в помощи:
выделение текстов (курсив, полужирный, подчеркнутый, цвет шрифта), добавление к отдельным вопросам дополнительных материалов
(картинка, звуковая дорожка, видео файл). В загрузке видео нет прямой необходимости - это на будущее.
Работа со шрифтом - напишу в помощи. А вот картинка, звук, видео - это значительно сложнее, при первоначальном обсуждении мы отложили это на следующую версию, и это даже не вошло в ТЗ. Возможность добавлять изображения и видео обязательно появится, но здесь я не могу ничего сказать про сроки.

12. Работа с заданиями - блоки вопросов. Необходимо иметь возможность вывода общего материала (текст, картинка, звуковая дорожка, видео) для всего блока вопросов (отображаемого на одной странице). Например, здесь http://runodog.ru/bb/BB_1213/Buklet_BB_1213_540_3-4.pdf задания для конкурса British Bulldog. Если бы мы захотели загрузить их на bbtc, то для первого блока нам нужен аудиофайл, для второго блока текст (может быть сделан как картинка), для четвертого блока картинка. В загрузке видео нет прямой необходимости - это на будущее.
С этим тоже понятно, возможность важная, но мы не обсуждали это для первой версии. Т.е. я это сделаю, но пока не могу ничего сказать про сроки.
По 11 и 12. Отладок остается очень мало и хочется закончить весь полезный объем так или иначе. Если есть необходимость корректировки ТЗ, то мы можем, как в прошлый раз, встретиться принять сделанную работу и обсудить эти новые задачи. Можно также пойти другим путем и попробовать найти альтернативные решения. Например, по поводу звуковых файлов, если на странице http://runodog.ru/index/2007_2008/0-17 , открытой в google chrome, я открываю «Скачать аудирование» в новой вкладке, то в ней открывается и проигрывается звуковой файл, а на экране ничего не меняется, то есть как бы остаются видны задания, которые можно продолжать выполнять. То есть речь идет о том, чтобы была возможность создания общей для всего блока информации, которая в данном случае будет текстовой, ссылкой, открываемой в новой вкладке. С картинками и текстами идей нет.

13. Прошел регистрацию на bbtc, как пользователь через административный режим. Во вкладке "Соревнование" вижу только общие "окончательные" результаты - баллов = 0, место =  .Так и должно быть? Или это потому, что регистрация пройдена после того, как регистрация была закрыта? Я думал, что пользователь на этой вкладке должен видеть тоже, что и администратор (результаты по событиям (express, hard) баллы, кол-во правильных ответов и т.д.), только без возможностей администратора (в т.ч. без просмотра вопросов и правильных ответов).
Насколько я понимаю, произошло следующее. Вы зарегистрировались как обычный пользователь. Ни одно соревнование вы не проходили и пройти уже не можете. Время публикации результатов пришло, поэтому вы видите ваш результат - 0 как сумму баллов по каждому заданию. Место вы не видите, потому что для этого пользователя место загружено не было. У нас места загружаются отдельно - грузится таблица, в которой указывается id пользователя и его место. Этому пользователю никто ничего не загружал, поэтому и места у него нет.
Можно выводить в этом случае что-то типа "не указано". Получится, что текст будет: место не указано.
Или вы имеете в виду, что он должен видеть свои нулевые результаты отдельно по каждому соревнованию тоже?
                Да, я думал, что будут отображаться нулевые результаты.

14. Резервное копирование. Не знаю возможностей сервера в этом отношении, но было бы спокойней, если бы можно было создавать какой-то backup и сохранять его у себя на компьютере.
Резервное копирование обычно делают на сервере независимо от самого приложения. Автоматически каждый день (можно чаще) запускается программа, которая делает бекап базы и посылают его на какой-то другой сервер для хранения. Если вы дадите мне доступ на какой-нибудь ваш сервер, я настрою, чтобы резверное копирование посылало снимок базы к вам тоже.
Или вы предлагаете в администрировании иметь возможность сделать бекап и скачать его себе?
У нас есть сервер, но нет нормального интернета. Будем решать этот вопрос через 1-2 месяца. Я имел ввиду, что если я буду знать, что backup есть у меня в ноутбуке, то я буду чувствовать себя спокойнее. Другой вариант, возможность принудительного резервного копирования на том сервере, на котором находится все – это полезно делать после глобального обновления. С другой стороны, если резервное копирование итак делается каждый день, то я не думаю, что у нас с этим могут быть какие-то проблемы.

15. Нужна возможность просмотра имеющихся соревнований (bbtc, bbtc2, bbtc3, bbtc20130513-20). Это может быть либо отдельный адрес, либо в каждом соревновании в разделе администрирование.
Это можно сделать.

Таким образом, большинство того, что вы предлагаете, сделать можно, я буду делать это в ближайшее время, пока не могу сказать срок, мне надо посчитать. Трудности вызывает только внедрение изображений и аудио в задачи, а еще материалы, общие для всех задач блока. Это я тоже сделаю, но с неопределенным сроком, около месяца, и в рамках отдельного договора. У вас есть какие-то свои планы, по которым эти возможности нужно получить быстрее?
            Внедрение изображений, звуковых файлов и материалов общих для всех задач блока – это возможность перенести архив заданий в режим онлайн-соревнования. Срочности в этом нет никакой, но можно было бы этим заниматься, пока есть время, а у нас оно сейчас как раз есть.

                По итогам остальных отладок я окончательно настрою СУБД и проведу последнее тестирование, что не займет много времени. Тогда я буду готов встретиться, для того, чтобы завершить сделанное и обсудить новые задачи.

-----

1. Работа с данными регистрации пользователей.
                1.1. В меню "Администрирование" нужно переименовать раздел "Данные по событию" в "Регистрация".
                1.2. Перенести функции из меню "Загрузить данные" раздел Администрирование/Регистрация на вторую строку. Меню "Загрузить данные" удалить.
                1.3. Добавить строку "Очистить список зарегистрированных пользователей".
2. Хотелось бы иметь возможность регистрации администраторов.
3. Возможность отображения мест по общему и конкурсному зачету. Сейчас есть просто "место". Нужно, чтобы вместо этого было "Место в общем зачете"
и еще, чтобы было "Место в конкурсном  зачете". Места подгружаются независимо друг от друга. Смысл в том, что сейчас мы не будем знать,
кто из учителей проводит конкурс "British Bulldog", а кто нет. Поэтому мы убираем необходимость указывать код школы при регистрации.
И сразу после окончания тестирования делаем места в общем зачете, которые загружаем в систему. После подведения итогов
конкурса "British Bulldog" мы будем знать кто из участников BBTC проводил "British Bulldog", а кто нет и тогда для тех, кто проводил, мы подводим
места отдельно, называем это место в конкурсном зачете и подгружаем в систему. Именно по этим местам будут выдаваться призы и сертификаты.
4. Клонирование событий. Непонятно, что происходит с подгруженными файлами и настройками наборов заданий. Файлы регистрации, задания и т.д.
копируются в папку нового события? Наборы заданий теперь ссылаются на них или на задания из исходного события?
5. Отображение результатов.
                5.1. В меню общего администрирования нужно переименовать "Дата отображения сокращенных результатов" в
                "Дата отображения только сокращенных результатов"
                5.2. В меню администрирования конкретных соревнований нужно добавить функцию "Дата отображения только сокращенных результатов".
                5.3. Необходимо сделать результаты и полные и сокращенные всегда видимыми для администраторов.
6. Загрузка заданий.
                6.1. При загрузке заданий, если до этого было что-то загружено, система работает некорректно.
                В одном случае, вопросы с одинаковыми RoundID были заменены, в другом случае, заменить их не получилось.
                Если в старом банке вопросов есть вопросы с RoundID, которых нет в новом пакете, то эти задания остаются. Такого быть не должно,
                при загрузке новых данных все старые должны удаляться. В любом случае, имеет смысл сделать возможность
                (кнопку) очистки всех данных из каждого хранилища.
                6.2. Установка условий вывода и генерации вопросов. Было бы удобнее писать в строку не те условия, которые есть сейчас,
                например: "2 random <- /bbtc3/explore/1", а то, что выводится, как результат, например: "2 random problems from: A1 A2 A3 A4 A5".
                Еще лучше, чтобы было можно писать и так и так. Второй вариант дает возможность более точных настроек.
                6.3. При работе с настройками наборов заданий неудобно то, что нужно ссылаться на каталог, в котором лежит файл.
                Если мы находимся на странице http://on-line.runodog.ru/bbtc3/express/contest_admin, то понятно, что мы работаем с
                bbtc3/express. Поэтому, если можно, то лучше сделать так, чтобы в строку состояния нужно было вводить
                5 random <- /6, problem /6/A147, folder /6.
7. Администрирование всей системы. Желательно иметь меню, общее для всех соревнований, в котором будут отображаться: список событий,
с указанием подгруженных файлов, для каждого из которых будет видно путь (bbtc/test), название файла, дата загрузки.


Ошибки были в базе:

# 518d38200cf2fdecf5cfbf18 different Express, was 118, now 123,
# history was: 00:00|1/4|B
#              00:00|A1|C 00:00|A2|B 00:00|A3|A 00:00|A4|B 00:00|A5|A 00:00|A26|C 00:00|A27|A 00:00|A28|B 00:00|A29|C 00:00|A30|c 00:00|A51|B 00:00|A52|A 00:00|A53|C 00:00|A54|B 00:00|A55|A 00:00|A76|C 00:00|A77|B 00:00|A78|B 00:00|A79|C 00:00|A80|B 00:00|A101|A 00:00|A102|C 00:00|A103|B 00:00|A104|B 00:00|A105|A 00:00|A105|b 00:00|A126|A 00:00|A127|C 00:00|A128|B 00:00|A129|A 00:00|A130|b 00:00|A151|C 00:00|A152|C 00:00|A153|A 00:00|A154|C 00:00|A155|B 00:00|A176|C 00:00|A177|a 00:00|A178|B 00:00|A179|b 00:00|A179|. 00:00|A180|B 00:00|A201|a 00:00|A202|B 00:00|A203|b 00:00|A204|A 00:00|A205|C 00:00|A226|c 00:00|A226|B 00:00|A227|C 00:00|A228|A 00:00|A229|B 00:00|A230|b 00:00|A230|C


# 517656240cf286004fd80d19 different Hard, was 12, now -2
# history was: 00:25|1/3|B 00:38|1/4|b 01:05|1/5|B 02:02|1/1|a 02:29|2/3|C 02:54|2/4|b 03:04|2/5|a 03:15|2/2|c 03:32|2/1|a 03:44|3/3|C 04:01|3/4|b 04:14|3/5|c 04:31|3/2|B 04:49|3/1|c 05:02|4/3|A 05:18|4/4|a 05:33|4/5|a 06:01|4/2|b 06:06|4/2|c 06:17|4/1|C 06:30|5/3|a 06:39|5/4|b 06:59|5/5|b 07:14|5/2|A 07:25|5/1|a 07:35|6/3|b 07:42|6/4|a
#              00:25|B3|B 00:38|B4|b 01:05|B5|B 02:02|B1|a 02:29|B28|C 02:54|B29|b 03:04|B30|a 03:15|B27|c 03:32|B26|a 03:44|B53|C 04:01|B54|b 04:14|B55|c 04:31|B52|B 04:49|B51|c 05:02|B78|A 05:18|B79|a 05:33|B80|a 06:01|B77|b 06:06|B77|c 06:17|B76|C 06:30|B103|a 06:39|B104|b 06:59|B105|b 07:14|B102|A 07:25|B101|a 07:35|B128|b 07:42|B129|a 07:58|B130|a 08:07|B127|b 08:14|B126|c 08:31|B153|b 08:45|B154|b 08:55|B155|B 08:59|B155|a 09:09|B152|a 09:19|B151|b 09:34|B178|a 09:42|B179|A 09:56|B177|c


# 5176b8050cf286004fd80d24
# 00:09|14|B 00:20|15|A 00:26|13|A 00:33|11|C 00:45|12|B 00:52|24|C 01:10|25|B 01:18|23|B 01:39|21|C 01:47|21|a 01:58|22|A 02:12|34|c 02:18|35|A 02:25|33|C 02:36|31|B 02:42|32|A 02:51|44|C 02:57|45|B 03:10|43|B 03:29|41|C 04:09|54|B 04:19|55|A 04:43|53|B 04:58|53|c 05:08|53|B 05:18|51|A 05:37|52|a 05:43|64|A 05:48|65|A 05:54|63|B 05:58|61|A 06:02|62|C 06:14|74|C 06:24|75|B 06:43|73|A 07:04|71|C 07:13|72|C 07:47|84|a 07:57|84|C 08:06|85|B 08:29|83|a 08:52|81|C 09:27|82|B 09:37|94|b 09:47|95|C
# 00:09|A4|B 00:20|A5|A 00:26|A3|A 00:33|A1|C 00:45|A2|B 00:52|A29|C 01:10|A30|B 01:18|A28|B 01:39|A26|C 01:47|A26|a 01:58|A27|A 02:12|A54|c 02:18|A55|A 02:25|A53|C 02:36|A51|B 02:42|A52|A 02:51|A79|C 02:57|A80|B 03:10|A78|B 03:29|A76|C 04:09|A104|B 04:19|A105|A 04:43|A103|B 04:58|A103|c 05:08|A103|B 05:18|A101|A 05:37|A102|a 05:43|A129|A 05:48|A130|A 05:54|A128|B 05:58|A126|A 06:02|A127|C 06:14|A154|C 06:24|A155|B 06:43|A153|A 07:04|A151|C 07:13|A152|C 07:47|A179|a 07:57|A179|C 08:06|A180|B 08:29|A178|a 08:52|A176|C 09:27|A177|B 09:37|A204|b 09:47|A205|C
